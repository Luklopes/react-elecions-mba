{"version":3,"sources":["api/api.js","App.jsx","index.js"],"names":["axios","axiosModule","create","baseURL","CACHE_CITIES","CACHE_CANDIDATES","CACHE_YEAR","CACHE_ELECTIONS","_apiGetCandidates","_apiGetCandidates2","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","candidates","wrap","_context","prev","next","get","sent","data","abrupt","stop","apiGetCities","_apiGetCities","_callee2","_yield$axios$get2","cities","_context2","sort","a","b","name","localeCompare","apiGetYear","_apiGetYear","_callee3","_yield$axios$get3","year","_context3","console","log","apiGetElection","_x","_apiGetElection","_callee4","cityId","allCities","allCandidates","allYears","currentCity","_yield$axios$get4","election","preData","finalData","_context4","length","find","city","id","concat","_toConsumableArray","votes","map","electionItem","currentCandidate","candidate","candidateId","_objectSpread","index","username","percent","presence","elected","App","_useState","useState","_useState2","_slicedToArray","loadingPage","setLoadingPage","_useState3","_useState4","setLoadingElection","_useState5","_useState6","setCities","_useState7","_useState8","years","setYear","_useState9","_useState10","setCurrentElection","_useState11","_useState12","selectedCity","setSelectedCity","useEffect","_getBackendCities","ultimoElemento","getBackendCities","_getBackendElection","getBackendElection","classificacao","partidas","_jsx","className","children","ClipLoader","_jsxs","item","time","pontuacao","total_jogos","total_pontos","total_vitorias","total_empates","total_derrotas","total_gols_marcados","total_gols_sofridos","saldo_gols","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3204a505.chunk.js","sourcesContent":["import axiosModule from 'axios'\r\n\r\nconst axios = axiosModule.create({ baseURL: 'http://localhost:3046' })\r\n\r\nlet CACHE_CITIES = []\r\nlet CACHE_CANDIDATES = []\r\nlet CACHE_YEAR = []\r\nconst CACHE_ELECTIONS = {}\r\n\r\nasync function _apiGetCandidates() {\r\n  const { data: candidates } = await axios.get('/candidates')\r\n  return candidates\r\n}\r\n\r\nasync function apiGetCities() {\r\n  const { data: cities } = await axios.get('/cities')\r\n  return cities.sort((a, b) => a.name.localeCompare(b.name))\r\n}\r\n\r\nasync function apiGetYear() {\r\n  const { data: year } = await axios.get('/year')\r\n  console.log(\"year\", year)\r\n  return year\r\n}\r\n\r\nasync function apiGetElection(cityId) {\r\n  // const allCities = await apiGetCities()\r\n  // const allCandidates = await _apiGetCandidates()\r\n  let allCities = []\r\n  let allCandidates = []\r\n  let allYears= []\r\n\r\n  if (CACHE_CITIES.length > 0) {\r\n    console.log('Obtendo cities do cache')\r\n    allCities = CACHE_CITIES\r\n  } else {\r\n    console.log('Obtendo cities do backend')\r\n    allCities = await apiGetCities()\r\n    CACHE_CITIES = allCities\r\n  }\r\n\r\n  if (CACHE_CANDIDATES.length > 0) {\r\n    console.log('Obtendo candidates do cache')\r\n    allCandidates = CACHE_CANDIDATES\r\n  } else {\r\n    console.log('Obtendo candidates do backend')\r\n    allCandidates = await _apiGetCandidates()\r\n    CACHE_CANDIDATES = allCandidates\r\n  }\r\n  if (CACHE_YEAR.length > 0) {\r\n    console.log('Obtendo candidates do cache')\r\n    allYears = CACHE_CANDIDATES\r\n  } else {\r\n    console.log('Obtendo years do backend')\r\n    allYears = await apiGetYear()\r\n    CACHE_CANDIDATES = allYears\r\n  }\r\n\r\n  // const [allCities, allCandidates] = await Promise.all([\r\n  //   apiGetCities(),\r\n  //   _apiGetCandidates(),\r\n  // ])\r\n\r\n  if (CACHE_ELECTIONS[cityId]) {\r\n    return CACHE_ELECTIONS[cityId]\r\n  }\r\n\r\n  const currentCity = allCities.find(city => city.id === cityId)\r\n\r\n  const { data: election } = await axios.get(`/election?cityId=${cityId}`)\r\n\r\n  const preData = {\r\n    city: currentCity,\r\n    election: [...election.sort((a, b) => b.votes - a.votes)].map(\r\n      electionItem => {\r\n        const currentCandidate = allCandidates.find(\r\n          candidate => candidate.id === electionItem.candidateId\r\n        )\r\n        return { ...electionItem, candidate: currentCandidate }\r\n      }\r\n    ),\r\n  }\r\n\r\n  const finalData = {\r\n    city: { ...preData.city },\r\n\r\n    election: preData.election.map((electionItem, index) => {\r\n      const { id, votes, candidate } = electionItem\r\n      const { name, username } = candidate\r\n      const percent = (votes / preData.city.presence) * 100\r\n      const elected = index === 0\r\n\r\n      return {\r\n        id,\r\n        votes,\r\n        percent,\r\n        elected,\r\n        candidate: { name, username },\r\n      }\r\n    }),\r\n  }\r\n\r\n  CACHE_ELECTIONS[cityId] = finalData\r\n\r\n  console.log(CACHE_ELECTIONS)\r\n  console.log(CACHE_YEAR)\r\n\r\n  return finalData\r\n}\r\n\r\nexport { apiGetCities, apiGetElection, apiGetYear }\r\n","import { useEffect, useState } from 'react'\nimport { _apiGetCandidates, apiGetCities, apiGetElection, apiGetYear } from './api/api'\nimport { ClipLoader } from 'react-spinners'\n\nexport default function App() {\n  const [loadingPage, setLoadingPage] = useState(true)\n  const [loadingElection, setLoadingElection] = useState(true)\n  const [cities, setCities] = useState([])\n  const [years, setYear] = useState([])\n  const [currentElection, setCurrentElection] = useState([])\n  const [selectedCity, setSelectedCity] = useState(null)\n\n  useEffect(() => {\n    async function getBackendCities() {\n      const cities = await apiGetCities()\n      setCities(cities)\n      setSelectedCity(cities[0].id)\n      setLoadingPage(false)\n      const year = await apiGetYear()\n      console.log(year)\n      console.log(\"certo\", year[0][\"2003\"][46])\n      const ultimoElemento = year[0][\"2003\"][year[0][\"2003\"].length - 1];\n      console.log(\"ultimoElemento\", ultimoElemento)\n      setYear(ultimoElemento)\n      console.log(year[\"2003\"])\n    }\n\n    getBackendCities()\n  }, [])\n\n  useEffect(() => {\n    if (!selectedCity) {\n      return\n    }\n\n    async function getBackendElection() {\n      setLoadingElection(true)\n      const election = await apiGetElection(selectedCity)\n      setCurrentElection(election)\n      setLoadingElection(false)\n    }\n\n    getBackendElection()\n  }, [selectedCity])\n\n  const  classificacao  = years\n  console.log(\"classificacao\", classificacao);\n  console.log(\"classificacao partidas\", classificacao.partidas[0]);\n  // console.log(\"classificacao times\", classificacao.partidas[0].time);\n  // console.log(\"classificacao map\", classificacao.partidas.map((item) => (item.time)));\n\n\n  // classificacao.sort((a, b) => {\n  //   if (a.total_pontos > b.total_pontos) {\n  //     return -1;\n  //   } else if (a.total_pontos < b.total_pontos) {\n  //     return 1;\n  //   } else {\n  //     if (a.saldo_gols > b.saldo_gols) {\n  //       return -1;\n  //     } else if (a.saldo_gols < b.saldo_gols) {\n  //       return 1;\n  //     } else {\n  //       return 0;\n  //     }\n  //   }\n  // });\n\n  if (loadingPage) {\n    return (\n      <div className=\"text-center mt-4\">\n        <ClipLoader />\n      </div>\n    )\n  }\n\n  let mainJsx = (\n    <div className=\"text-center mt-4\">\n      <ClipLoader />\n    </div>\n  )\n\n  \n  return (\n    <table>\n    <thead>\n      <tr>\n        <th>Posição</th>\n        <th>Time</th>\n        <th>Jogos</th>\n        <th>Pontos</th>\n        <th>Vitórias</th>\n        <th>Empates</th>\n        <th>Derrotas</th>\n        <th>Gols marcados</th>\n        <th>Gols sofridos</th>\n        <th>Saldo de gols</th>\n      </tr>\n    </thead>\n    <tbody>\n      {classificacao.map((item, index) => (\n        <tr key={item.time}>\n          <td>{index + 1}</td>\n          <td>{item.time}</td>\n          <td>{item.pontuacao.total_jogos}</td>\n          <td>{item.pontuacao.total_pontos}</td>\n          <td>{item.pontuacao.total_vitorias}</td>\n          <td>{item.pontuacao.total_empates}</td>\n          <td>{item.pontuacao.total_derrotas}</td>\n          <td>{item.pontuacao.total_gols_marcados}</td>\n          <td>{item.pontuacao.total_gols_sofridos}</td>\n          <td>{item.pontuacao.saldo_gols}</td>\n        </tr>\n      ))}\n    </tbody>\n  </table>\n  )\n}\n","/**\n * Importação do módulo principal do React.\n * A partir da versão 17.x, não é mais obrigatório\n * para criar componentes. Entretanto, a importação\n * é necessária neste arquivo pois \"React\" é de fato\n * utilizado com StrictMode\n */\nimport React from 'react';\n\n/**\n * Este é o módulo do React que renderiza HTML.\n * Em mobile temos, por exemplo, o react-native\n */\nimport ReactDOM from 'react-dom';\n\n/**\n * Importação do componente principal\n * da aplicação\n */\nimport App from './App';\n\n/**\n * Este arquivo pode ser considerado o CSS\n * Global do App. Perceba a peculiaridade da\n * sintaxe de importação\n */\nimport './index.css';\n\n/**\n * <React.StrictMode> é utilizado na fase\n * de \"Desenvolvimento\" gerando mais mensagens\n * de erro para apoiar o Desenvolvedor. Por isso\n * é comum ocorrerem renderizações \"a mais\".\n * Ele é retirado automaticamente em produção.\n */\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}